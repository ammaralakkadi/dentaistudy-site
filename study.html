<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Study Builder – DentAIstudy</title>
    <link rel="icon" href="/favicon.ico" sizes="any" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32.png" />
    <link rel="icon" type="image/png" sizes="512x512" href="/favicon-512.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon-512.png" />

    <!-- Main CSS -->
    <link rel="stylesheet" href="assets/css/style-v3.css" />

    <!-- PDF.js for reading uploaded PDFs -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>

    <!-- JS: Supabase + Auth client + Guard + Main -->
    <script
      src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"
      defer
    ></script>
    <script src="assets/js/auth-client.js" defer></script>
    <script src="assets/js/auth-guard.js" defer></script>
    <script src="assets/js/auth-logout.js" defer></script>
    <script defer src="assets/js/main.js"></script>
    <script defer src="assets/js/study-builder.js"></script>
  </head>

  <body class="page-study page-study-builder">
    <div class="main-wrapper">
      <!-- HEADER -->
      <header class="site-header">
        <div class="container header-inner">
          <button class="menu-toggle" aria-label="Open menu">
            <span></span><span></span><span></span>
          </button>
          <a class="brand" href="index.html">
            <span>Dent</span><span>AIstudy</span>
          </a>

          <nav class="header-nav">
            <a href="subjects.html">Subjects</a>
            <a href="study.html">Study builder</a>
            <a href="blogs.html">Blogs</a>
            <a href="pricing.html">Pricing</a>
            <a href="contact.html">Contact</a>
          </nav>

          <div class="header-right">
            <a href="login.html" class="btn btn-outline header-login">Log in</a>
            <a href="signup.html" class="btn btn-primary header-signup"
              >Sign up</a
            >
          </div>
        </div>
      </header>

      <!-- Mobile nav -->
      <div class="slide-nav-backdrop"></div>
      <nav class="slide-nav">
        <div class="slide-nav-header">
          <h3>Menu</h3>
        </div>
        <div class="slide-nav-links">
          <a href="study.html">Study builder</a>
          <a href="subjects.html">Subjects</a>
          <a href="blogs.html">Blogs</a>
          <a href="pricing.html">Pricing</a>
          <a href="contact.html">Contact</a>

          <div
            class="slide-nav-divider"
            role="separator"
            aria-hidden="true"
          ></div>

          <a href="profile.html">My profile</a>
          <a href="settings.html">Account settings</a>

          <div
            class="slide-nav-divider"
            role="separator"
            aria-hidden="true"
          ></div>

          <a href="login.html" class="slide-login-link">Log in</a>
        </div>
      </nav>

      <main>
        <div class="container">
          <div class="workspace-shell">
            <!-- SIDEBAR -->
            <aside class="workspace-sidebar">
              <div class="sidebar-card">
                <div class="sidebar-card-header">
                  <div class="sidebar-avatar">
                    <img
                      src="assets/img/default-avatar.png"
                      alt="Your avatar"
                      data-das-avatar
                    />
                  </div>
                  <div>
                    <div class="workspace-card-title">
                      <span id="das-user-name">Your workspace</span>
                    </div>
                    <div class="sidebar-card-subtitle">Study tools & packs</div>
                  </div>
                </div>

                <div class="sidebar-tags">
                  <span class="sidebar-tag" id="das-identity-level"
                    >Undergraduate</span
                  >
                  <span class="sidebar-tag" id="das-identity-plan"
                    >Free plan</span
                  >
                  <span class="sidebar-tag" id="das-identity-activity"
                    >Active today</span
                  >
                </div>

                <nav class="sidebar-nav">
                  <a href="study.html" class="sidebar-nav-item is-active"
                    ><strong>Study builder</strong></a
                  >
                  <a href="profile.html" class="sidebar-nav-item">Profile</a>
                  <a href="settings.html" class="sidebar-nav-item">Settings</a>
                </nav>
              </div>
            </aside>

            <!-- MAIN AREA -->
            <section class="workspace-main">
              <div class="study-chat-shell">
                <div class="study-chat-grid">
                  <div class="study-answer-card study-chat-card">
                    <div class="study-answer-header">
                      <div class="study-answer-title">
                        <strong>Study builder</strong>
                      </div>
                    </div>

                    <div class="study-answer-body-wrapper study-chat-body">
                      <p
                        class="study-answer-placeholder page-study-placeholder"
                      >
                        Start with a topic or question
                      </p>

                      <div
                        id="study-chat"
                        class="study-chat-log"
                        aria-live="polite"
                      ></div>
                    </div>

                    <!-- Composer (same IDs so JS keeps working) -->
                    <form id="study-form" class="study-chat-composer">
                      <div class="study-composer-left">
                        <button
                          type="button"
                          id="study-add-file"
                          class="study-chat-iconbtn"
                          aria-label="Attachments and output style"
                          title="Attachments and output style"
                        >
                          <svg viewBox="0 0 24 24" aria-hidden="true">
                            <path
                              d="M12 5v14M5 12h14"
                              fill="none"
                              stroke="currentColor"
                              stroke-width="2"
                              stroke-linecap="round"
                            />
                          </svg>
                        </button>

                        <div
                          id="study-composer-menu"
                          class="study-composer-menu"
                          aria-hidden="true"
                        >
                          <button
                            type="button"
                            id="study-attach-action"
                            class="study-composer-menu-item"
                          >
                            <span
                              class="study-composer-menu-item-icon"
                              aria-hidden="true"
                            >
                              <svg
                                viewBox="0 0 24 24"
                                width="22"
                                height="22"
                                aria-hidden="true"
                              >
                                <path
                                  d="M21.44 11.05l-8.49 8.49a5.5 5.5 0 0 1-7.78-7.78l9.19-9.19a3.5 3.5 0 0 1 4.95 4.95l-9.19 9.19a1.5 1.5 0 0 1-2.12-2.12l8.49-8.49"
                                  fill="none"
                                  stroke="currentColor"
                                  stroke-width="2"
                                  stroke-linecap="round"
                                  stroke-linejoin="round"
                                />
                              </svg>
                            </span>
                            <span>Attach PDF</span>
                          </button>

                          <div class="study-composer-menu-section">
                            <div class="study-composer-menu-label">
                              Output style
                            </div>
                            <div
                              class="study-output-chips"
                              role="group"
                              aria-label="Output style"
                            >
                              <button
                                type="button"
                                class="study-output-chip is-active"
                                data-output="notes"
                              >
                                Notes
                              </button>
                              <button
                                type="button"
                                class="study-output-chip"
                                data-output="osce"
                              >
                                OSCE
                              </button>
                              <button
                                type="button"
                                class="study-output-chip"
                                data-output="flashcards"
                              >
                                Flashcards
                              </button>
                              <button
                                type="button"
                                class="study-output-chip"
                                data-output="mcq"
                              >
                                MCQs
                              </button>
                              <button
                                type="button"
                                class="study-output-chip"
                                data-output="table"
                              >
                                Compare table
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>

                      <input
                        type="file"
                        id="study-file-input"
                        class="study-file-input"
                        multiple
                        accept=".pdf"
                      />

                      <textarea
                        id="study-topic"
                        name="topic"
                        class="study-chat-input"
                        placeholder="Ask anything…"
                        rows="1"
                      ></textarea>

                      <button
                        class="study-chat-send"
                        type="submit"
                        aria-label="Send"
                      >
                        <svg viewBox="0 0 24 24" aria-hidden="true">
                          <path
                            d="M12 5l7 7-1.4 1.4L13 8.8V20h-2V8.8L6.4 13.4 5 12l7-7z"
                          ></path>
                        </svg>
                      </button>

                      <div
                        id="study-file-summary"
                        class="study-file-summary"
                        aria-live="polite"
                      ></div>
                    </form>
                  </div>
                </div>
              </div>
            </section>
          </div>
        </div>
      </main>
    </div>
  </body>
</html>
